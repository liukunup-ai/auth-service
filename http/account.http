@host = localhost
@port = 7001
@baseUrl = http://{{host}}:{{port}}/api/v1

# 默认变量值
@captchaId = "MGsuVETAAYY0NStzCeoO"
@captchaAnswer = "326401"
@username = "testuser"
@password = "Test#123456"
@email = "testuser@example.com"
@accessToken = ""
@refreshToken = ""
@userId = "1"

### 获取验证码
GET {{baseUrl}}/auth/captcha
Content-Type: application/json

### 用户注册
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "username": {{username}},
  "password": {{password}},
  "email": {{email}},
  "phone": "13800001234",
  "nickname": "测试用户",
  "captchaId": {{captchaId}},
  "captchaAnswer": {{captchaAnswer}}
}

### 用户登录 - 使用用户名
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "username": "{{username}}",
  "password": "{{password}}",
  "captchaId": "{{captchaId}}",
  "captchaAnswer": "{{captchaAnswer}}"
}

### 用户登录 - 使用邮箱
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "username": "{{email}}",
  "password": "{{password}}",
  "captchaId": "{{captchaId}}",
  "captchaAnswer": "{{captchaAnswer}}"
}

### 刷新令牌
POST {{baseUrl}}/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{refreshToken}}"
}

### 验证令牌
POST {{baseUrl}}/auth/verify
Content-Type: application/json

{
  "token": "{{accessToken}}"
}

### 重置密码 - 发送重置请求
POST {{baseUrl}}/auth/password/reset
Content-Type: application/json

{
  "email": "{{email}}",
  "captchaId": "{{captchaId}}",
  "captchaAnswer": "{{captchaAnswer}}"
}

### 获取用户资料 (需要认证)
GET {{baseUrl}}/auth/profile
Content-Type: application/json
Authorization: Bearer {{accessToken}}

### 登出 (需要认证)
POST {{baseUrl}}/auth/logout
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "accessToken": "{{accessToken}}",
  "refreshToken": "{{refreshToken}}"
}

### 修改密码 (需要认证)
PUT {{baseUrl}}/auth/password/change
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "oldPassword": "{{password}}",
  "newPassword": "NewPass#123456"
}

### 检查权限 (需要认证)
POST {{baseUrl}}/auth/permission/check
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "userId": {{userId}},
  "permission": "user:read"
}

### 测试接口 - 使用无效Token
GET {{baseUrl}}/auth/profile
Content-Type: application/json
Authorization: Bearer invalid_token_here

### 测试接口 - 缺少参数
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "username": "",
  "password": ""
}
