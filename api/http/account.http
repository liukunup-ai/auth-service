@host = localhost
@port = 7001
@baseUrl = http://{{host}}:{{port}}/v1

### 获取验证码
GET {{baseUrl}}/auth/captcha
Content-Type: application/json

### 用户注册
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "username": "testuser",
  "password": "test#123456",
  "email": "testuser@example.com",
  "phone": "13800001234",
  "nickname": "测试用户",
  "captchaId": "RvvEmfFOF193c9U3u0z7",
  "captchaAnswer": "645203"
}

### 用户登录
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "username": "testuser",
  "password": "test#123456",
  "captchaId": "sYdcVoHvFrmgjyfAt9eH",
  "captchaAnswer": "959112"
}

### 刷新令牌
POST {{baseUrl}}/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{refreshToken}}"
}

> {%
    client.global.set("accessToken", response.body.accessToken);
    client.global.set("refreshToken", response.body.refreshToken);
    client.log("令牌刷新成功");
%}

### 验证令牌
POST {{baseUrl}}/auth/verify
Content-Type: application/json

{
  "token": "{{accessToken}}"
}

> {%
    if (response.body.isValid) {
        client.log("令牌有效，用户: " + response.body.username);
    } else {
        client.log("令牌无效: " + response.body.message);
    }
%}

### 重置密码
POST {{baseUrl}}/auth/password/reset
Content-Type: application/json

{
  "email": "user@example.com",
  "captchaId": "{{captchaId}}",
  "captchaAnswer": "1234",
  "newPassword": "newpassword123"
}

> {%
    client.log("密码重置请求已发送");
%}

### 登出 (需要认证)
POST {{baseUrl}}/auth/logout
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "accessToken": "{{accessToken}}",
  "refreshToken": "{{refreshToken}}"
}

> {%
    client.log("登出成功");
    client.global.clear("accessToken");
    client.global.clear("refreshToken");
%}

### 修改密码 (需要认证)
PUT {{baseUrl}}/auth/password/change
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "oldPassword": "oldpassword",
  "newPassword": "newpassword123"
}

> {%
    client.log("密码修改成功");
%}
